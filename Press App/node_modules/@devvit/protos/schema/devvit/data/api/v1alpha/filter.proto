syntax = "proto3";

package devvit.data.api.v1alpha;

import "devvit/options/options.proto";
import "devvit/reddit/v2alpha/subredditv2.proto";

option go_package = "github.snooguts.net/reddit/reddit-devplatform-monorepo/go-common/generated/protos/types/devvit/data/api/v1alpha";

message FirehoseFilterData {
  // The approval status for a post or comment
  enum ApprovalStatus {
    UNKNOWN_APPROVAL_STATUS = 0;
    MOD_APPROVED = 1;
    MOD_REMOVED = 2;
    MOD_SPAMMED = 3;
    ADMIN_APPROVED = 4;
    ADMIN_REMOVED = 5;
    ADMIN_SPAMMED = 6;
    AUTHOR_REMOVED = 7;
    AUTHOR_SPAMMED = 8;
  }

  message SafetyTag {
    map<string, double> versions = 1;
    double score = 2;
  }

  message PostFilterData {
    bool admin_takedown = 1;
    map<string, double> perspective_scores_title = 2;
    map<string, double> perspective_scores_body = 3;
    SafetyTag safety_x_tag = 4;
    SafetyTag safety_v_tag = 5;
    ApprovalStatus approval_status = 6;
    // custom value set by our own services
    bool sexually_explicit = 7;
    repeated string media_ids = 8;
    string language_code = 9;
  }

  message CommentFilterData {
    bool admin_takedown = 1;
    double abuse_score = 2;
    map<string, double> perspective_scores = 3;
    ApprovalStatus approval_status = 4;
    SafetyTag safety_x_tag = 5;
    SafetyTag safety_v_tag = 6;
    // custom value set by our own services
    bool sexually_explicit = 7;
    repeated string media_ids = 8;
  }

  devvit.options.FirehoseEvent event = 1;
  string subreddit_id = 2;
  devvit.reddit.v2alpha.SubredditRating subreddit_rating = 3;

  PostFilterData post = 4;
  CommentFilterData comment = 5;

  devvit.reddit.v2alpha.SubredditType subreddit_type = 6;
}
