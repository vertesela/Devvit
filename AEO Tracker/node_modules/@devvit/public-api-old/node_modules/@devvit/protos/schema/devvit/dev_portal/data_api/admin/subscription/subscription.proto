syntax = "proto3";

package devvit.dev_portal.data_api.admin.subscription;

import "devvit/data/api/v1alpha/admin.proto";
import "devvit/options/options.proto";
import "devvit/reddit/v2alpha/subredditv2.proto";

option go_package = "github.snooguts.net/reddit/reddit-devplatform-monorepo/go-common/generated/protos/types/devvit/devportal/data_api/admin/subscription";

// region Subscription messages
message CreateDataSubscriptionRequest {
  devvit.options.DataTier tier = 1;
  repeated devvit.options.FirehoseEvent events = 2;
  repeated string subreddits = 3;
  repeated devvit.reddit.v2alpha.SubredditRating subreddit_ratings = 4;
  string customer = 5;
  string name = 6;
  optional string description = 7;
}
message CreateDataSubscriptionResponse {
  devvit.data.api.v1alpha.DataSubscription subscription = 1;
}

message GetDataSubscriptionByIdRequest {
  string subscription_id = 1;
}
message GetDataSubscriptionByIdResponse {
  devvit.data.api.v1alpha.DataSubscription subscription = 1;
}

message GetDataSubscriptionsByOrganizationNameRequest {
  string organization_name = 1;
}
message GetDataSubscriptionsByOrganizationNameResponse {
  repeated devvit.data.api.v1alpha.DataSubscription subscriptions = 1;
}

message UpdateDataSubscriptionRequest {
  // Id of the subscription to update
  string subscription_id = 1;
  // New name of the subscription
  optional string name = 2;
  // New description of the subscription
  optional string description = 3;
  // New data tier of the subscription.
  optional devvit.options.DataTier tier = 4;
  // new events. If empty, no change will be applied. If non-empty, will replace existing events.
  repeated devvit.options.FirehoseEvent events = 5;
  // new subreddits. If empty, no change will be applied. If non-empty, will replace existing subreddits.
  repeated string subreddits = 6;
  // new subreddit ratings. If empty, no change will be applied. If non-empty, will replace existing subreddit ratings.
  repeated devvit.reddit.v2alpha.SubredditRating subreddit_ratings = 7;
}
message UpdateDataSubscriptionResponse {
  devvit.data.api.v1alpha.DataSubscription subscription = 1;
}

message DeleteDataSubscriptionRequest {
  string subscription_id = 1;
}
message DeleteDataSubscriptionResponse {}
