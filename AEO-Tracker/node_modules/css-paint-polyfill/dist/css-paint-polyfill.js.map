{"version":3,"file":"css-paint-polyfill.js","sources":["../src/util.js","../src/index.js","../src/realm.js"],"sourcesContent":["/**\n * Copyright 2018 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** Canvas#toBlob() ponyfill */\nexport function canvasToBlob(canvas, callback, type, quality) {\n\tif (canvas.toBlob) return canvas.toBlob(callback, type, quality);\n\n\tlet bin = atob(canvas.toDataURL(type, quality).split(',')[1]),\n\t\tarr = new Uint8Array(bin.length);\n\tfor (let i=0; i<bin.length; i++) arr[i] = bin.charCodeAt(i);\n\tcallback(new Blob([arr], { type }));\n}\n\n/** Basically fetch(u).then( r => r.text() ) */\nexport function fetchText(url, callback) {\n\tlet xhr = new XMLHttpRequest();\n\txhr.onreadystatechange = () => {\n\t\tif (xhr.readyState===4) {\n\t\t\tcallback(xhr.responseText);\n\t\t}\n\t};\n\txhr.open('GET', url, true);\n\txhr.send();\n}\n\n/** Object.defineProperty() ponyfill */\nexport function defineProperty(obj, name, def) {\n\tif (Object.defineProperty) {\n\t\tObject.defineProperty(obj, name, def);\n\t}\n\telse {\n\t\tobj[name] = def.get();\n\t}\n}\n","/**\n * Copyright 2018 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Realm } from './realm';\nimport { defineProperty, fetchText } from './util';\n\nlet paintWorklet;\n\nlet CSS = window.CSS;\nif (!CSS) window.CSS = CSS = {};\n\nif (!CSS.supports) CSS.supports = function s(property, value) {\n\tif (property == 'paint') return true;\n\tif (value) {\n\t\tconst el = styleIsolationFrame.contentDocument.body;\n\t\tel.style.cssText = property + ':' + value;\n\t\treturn el.style.cssText.length > 0;\n\t}\n\tlet tokenizer = /(^|not|(or)|(and))\\s*\\(\\s*(.+?)\\s*:(.+?)\\)\\s*|(.)/gi,\n\t\tcomparison, v, t, n;\n\t// [, not, or, and, key, value, unknown]\n\twhile ((t = tokenizer.exec(property))) {\n\t\tif (t[6]) return false;\n\t\tn = s(t[4], t[5]);\n\t\tv = t[2] ? (v || n) : t[3] ? (v && n) : (comparison = !t[1], n);\n\t}\n\treturn v == comparison;\n};\n\nif (!CSS.escape) CSS.escape = s => s.replace(/([^\\w-])/g,'\\\\$1');\n\n/** @type {{ [name: string]: { name: string, syntax: string, inherits: boolean, initialValue: string }} } */\nconst CSS_PROPERTIES = {};\nif (!CSS.registerProperty) CSS.registerProperty = function (def) {\n\tCSS_PROPERTIES[def.name] = def;\n};\n\n// Minimal poorlyfill for CSS properties+values\nfunction CSSUnitValue(value, unit) {\n\tconst num = parseFloat(value);\n\tthis.value = isNaN(num) ? value : num;\n\tthis.unit = unit;\n}\nCSSUnitValue.prototype.toString = function() {\n\treturn this.value + (this.unit == 'number' ? '' : this.unit);\n};\nCSSUnitValue.prototype.valueOf = function() {\n\treturn this.value;\n};\n\n'Hz Q ch cm deg dpcm dpi ddpx em ex fr grad in kHz mm ms number pc percent pt px rad rem s turn vh vmax vmin vw'.split(' ').forEach(unit => {\n\tif (!CSS[unit]) {\n\t\tCSS[unit] = v => new CSSUnitValue(v, unit);\n\t}\n});\n\n// Matches CSS properties that can accept a paint() value:\nconst IMAGE_CSS_PROPERTIES = /(background|mask|cursor|-image|-source)/;\n\nconst supportsPaintWorklet = !!CSS.paintWorklet;\nif (!supportsPaintWorklet) {\n\tpaintWorklet = new PaintWorklet();\n\tdefineProperty(CSS, 'paintWorklet', {\n\t\tenumerable: true,\n\t\tconfigurable: true,\n\t\tget: () => paintWorklet\n\t});\n}\n\nconst GLOBAL_ID = 'css-paint-polyfill';\n\nlet root = document.createElement(GLOBAL_ID);\nif (!supportsPaintWorklet) {\n\tdocument.documentElement.appendChild(root);\n}\n\nlet styleIsolationFrame = document.createElement('iframe');\nstyleIsolationFrame.style.cssText = 'position:absolute; left:0; top:-999px; width:1px; height:1px;';\nroot.appendChild(styleIsolationFrame);\n\nlet overridesStylesheet = document.createElement('style');\noverridesStylesheet.id = GLOBAL_ID;\noverridesStylesheet.$$isPaint = true;\nroot.appendChild(overridesStylesheet);\nlet overrideStyles = overridesStylesheet.sheet;\nlet testStyles = root.style;\n\n// when `true`, interception of styles is disabled\nlet bypassStyleHooks = false;\n\nconst EMPTY_ARRAY = [];\nconst HAS_PAINT = /(paint\\(|-moz-element\\(#paint-|-webkit-canvas\\(paint-|[('\"]blob:[^'\"#]+#paint=|[('\"]data:image\\/paint-)/;\nconst USE_CSS_CANVAS_CONTEXT = 'getCSSCanvasContext' in document;\nconst USE_CSS_ELEMENT = (testStyles.backgroundImage = `-moz-element(#${GLOBAL_ID})`) === testStyles.backgroundImage;\nconst HAS_PROMISE = (typeof Promise === 'function');\ntestStyles.cssText = 'display:none !important;';\n\nlet defer = window.requestAnimationFrame || setTimeout;\nlet getDevicePixelRatio = () => window.devicePixelRatio || 1;\n\nlet painters = {};\nlet trackedRules = {};\nlet styleSheetCounter = 0;\n\nfunction registerPaint(name, Painter, worklet) {\n\t// if (painters[name]!=null) throw Error(`registerPaint(${name}): name already registered`);\n\tpainters[name] = {\n\t\tworklet,\n\t\tPainter,\n\t\tproperties: Painter.inputProperties ? [].slice.call(Painter.inputProperties) : [],\n\t\tbit: 0,\n\t\tinstances: []\n\t};\n\tlet query = '';\n\tfor (let i=overrideStyles.cssRules.length; i--; ) {\n\t\tconst rule = overrideStyles.cssRules[i];\n\t\tif (rule.style.cssText.indexOf('-' + name) !== -1) {\n\t\t\tquery += rule.selectorText;\n\t\t}\n\t}\n\tif (query) processItem(query, true);\n}\n\nfunction getPainter(name) {\n\tlet painter = painters[name];\n\t// if (painter == null) throw Error(`No paint defined for \"${name}\"`);\n\treturn painter;\n}\n\nfunction getPainterInstance(painter) {\n\t// Alternate between two instances.\n\t// @TODO should alternate between two *worklets*. Class instances are meaningless for perf.\n\tlet inst = painter.bit ^= 1;\n\treturn painter.instances[inst] || (painter.instances[inst] = new painter.Painter());\n}\n\nfunction paintRuleWalker(rule, context) {\n\tlet css = rule.cssText;\n\tconst hasPaint = HAS_PAINT.test(css);\n\n\tif (context.isNew === true && hasPaint) {\n\t\tif (css !== (css = escapePaintRules(css))) {\n\t\t\trule = replaceRule(rule, css);\n\t\t}\n\t}\n\n\t// Hello future self!\n\t// This eager exit avoids tracking unpainted rules.\n\t// That seems reasonable, but it wasn't in place in 3.0...\n\t// Perhaps I'm missing something, if so, I apologize.\n\tif (!hasPaint) return;\n\n\tlet selector = rule.selectorText,\n\t\tcssText = getCssText(rule.style),\n\t\tindex, key, cached;\n\n\tif (context.counters[selector] == null) {\n\t\tindex = context.counters[selector] = 1;\n\t}\n\telse {\n\t\tindex = ++context.counters[selector];\n\t}\n\tkey = 'sheet' + context.sheetId + '\\n' + selector + '\\n' + index;\n\tif (trackedRules[key] != null) {\n\t\tcached = trackedRules[key];\n\t\tif (cached.selector === selector) {\n\t\t\tcached.rule = rule;\n\t\t\tif (cached.cssText !== cssText) {\n\t\t\t\tcontext.toProcess.push(cached);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tcontext.toRemove.push(cached);\n\t}\n\telse {\n\t\tcached = trackedRules[key] = { key, selector, cssText, properties: {}, rule };\n\t\tcontext.toProcess.push(cached.selector);\n\t}\n}\n\nfunction walk(node, iterator) {\n\tif ('ownerSVGElement' in node) return;\n\titerator(node);\n\tlet child = node.firstElementChild;\n\twhile (child) {\n\t\twalk(child, iterator);\n\t\tchild = child.nextElementSibling;\n\t}\n}\n\nfunction update() {\n\tlet sheets = [].slice.call(document.styleSheets),\n\t\tcontext = {\n\t\t\ttoProcess: [],\n\t\t\ttoRemove: [],\n\t\t\tcounters: {},\n\t\t\tisNew: false,\n\t\t\tsheetId: null,\n\t\t\t// this property is unused - it's assigned to in order to prevent Terser from removing the try/catch on L220\n\t\t\trules: null\n\t\t},\n\t\tinvalidateAll;\n\n\tfor (let i=0; i<sheets.length; i++) {\n\t\tlet node = sheets[i].ownerNode;\n\t\tif (node.$$isPaint) continue;\n\n\t\t// Check that we can access the sheet.\n\t\t// (assigning to `context.rules` prevents Terser from removing the block)\n\t\ttry { context.rules = node.sheet.cssRules; }\n\t\tcatch (e) { continue; }\n\n\t\tcontext.sheetId = node.$$paintid;\n\t\tcontext.isNew = context.sheetId == null;\n\t\tif (context.isNew) {\n\t\t\tcontext.sheetId = node.$$paintid = ++styleSheetCounter;\n\t\t\t// allow processing to defer parse\n\t\t\tif (processNewSheet(node)===false) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tinvalidateAll = true;\n\t\t}\n\t\twalkStyles(node.sheet, paintRuleWalker, context);\n\t}\n\n\tfor (let i = context.toRemove.length; i--; ) {\n\t\t// @todo cleanup?\n\t\tdelete trackedRules[context.toRemove[i].key];\n\t}\n\n\tif (context.toProcess.length>0) {\n\t\tprocessItem(context.toProcess.join(', '));\n\t}\n\n\t// If a new stylesheet is injected, invalidate all geometry and paint output.\n\tif (invalidateAll) {\n\t\tprocessItem('[data-css-paint]', true);\n\t}\n}\n\nfunction walkStyles(sheet, iterator, context) {\n\tlet stack = [[0, sheet.cssRules]],\n\t\tcurrent = stack[0],\n\t\trules = current[1];\n\tif (rules) {\n\t\tfor (let j=0; stack.length>0; j++) {\n\t\t\tif (j>=rules.length) {\n\t\t\t\tstack.pop();\n\t\t\t\tlet len = stack.length;\n\t\t\t\tif (len > 0) {\n\t\t\t\t\tcurrent = stack[len - 1];\n\t\t\t\t\trules = current[1];\n\t\t\t\t\tj = current[0];\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tcurrent[0] = j;\n\t\t\tlet rule = rules[j];\n\t\t\t// process @import rules (requires re-fetching)\n\t\t\tif (rule.type === 3) {\n\t\t\t\tif (rule.$$isPaint) continue;\n\t\t\t\tconst mq = rule.media && rule.media.mediaText;\n\t\t\t\tif (mq && !self.matchMedia(mq).matches) continue;\n\t\t\t\t// don't refetch google font stylesheets\n\t\t\t\tif (/ts\\.g.{7}is\\.com\\/css/.test(rule.href)) continue;\n\t\t\t\trule.$$isPaint = true;\n\t\t\t\tfetchText(rule.href, processRemoteSheet);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (rule.type !== 1) {\n\t\t\t\tif (rule.cssRules && rule.cssRules.length>0) {\n\t\t\t\t\tstack.push([0, rule.cssRules]);\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet r = iterator(rule, context);\n\t\t\tif (r!==undefined) context = r;\n\t\t}\n\t}\n\treturn context;\n}\n\nfunction parseCss(css) {\n\tlet parent = styleIsolationFrame.contentDocument.body;\n\tlet style = document.createElement('style');\n\tstyle.media = 'print';\n\tstyle.$$paintid = ++styleSheetCounter;\n\tstyle.appendChild(document.createTextNode(css));\n\tparent.appendChild(style);\n\tstyle.sheet.remove = () => parent.removeChild(style);\n\treturn style.sheet;\n}\n\nfunction replaceRule(rule, newRule) {\n\tlet sheet = rule.parentStyleSheet,\n\t\tparent = rule.parentRule,\n\t\trules = (parent || sheet).cssRules,\n\t\tindex = rules.length - 1;\n\tfor (let i=0; i<=index; i++) {\n\t\tif (rules[i] === rule) {\n\t\t\t(parent || sheet).deleteRule(i);\n\t\t\tindex = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (newRule!=null) {\n\t\tif (parent) {\n\t\t\tlet index = parent.appendRule(newRule);\n\t\t\treturn parent.cssRules[index];\n\t\t}\n\t\tsheet.insertRule(newRule, index);\n\t\treturn sheet.cssRules[index];\n\t}\n}\n\n// Replace paint(id) with url(data:image/paint-id) for a newly detected stylesheet\nfunction processNewSheet(node) {\n\tif (node.$$isPaint) return;\n\n\tif (node.href) {\n\t\tfetchText(node.href, processRemoteSheet);\n\t\treturn false;\n\t}\n\n\tfor (let i=node.childNodes.length; i--; ) {\n\t\tlet css = node.childNodes[i].nodeValue;\n\t\tlet escaped = escapePaintRules(css);\n\t\tif (escaped !== css) {\n\t\t\tnode.childNodes[i].nodeValue = escaped;\n\t\t}\n\t}\n}\n\nfunction processRemoteSheet(css) {\n\tlet sheet = parseCss(escapePaintRules(css));\n\n\t// In Firefox, accessing .cssRules in a stylesheet with pending @import rules fails.\n\t// Try to wait for them to resolve, otherwise try again after a long delay.\n\ttry {\n\t\tsheet._ = sheet.cssRules.length;\n\t}\n\tcatch (e) {\n\t\tlet next = () => {\n\t\t\tif (sheet) processRemoteSheetRules(sheet);\n\t\t\tsheet = null;\n\t\t\tclearTimeout(timer);\n\t\t};\n\t\tsheet.ownerNode.onload = sheet.ownerNode.onerror = next;\n\t\tlet timer = setTimeout(next, 5000);\n\t\treturn;\n\t}\n\n\tprocessRemoteSheetRules(sheet);\n}\n\nfunction processRemoteSheetRules(sheet) {\n\tlet newSheet = '';\n\twalkStyles(sheet, (rule) => {\n\t\tif (rule.type !== 1) return;\n\t\tlet css = '';\n\t\tfor (let i=0; i<rule.style.length; i++) {\n\t\t\tconst prop = rule.style.item(i);\n\t\t\tconst value = rule.style.getPropertyValue(prop);\n\t\t\tif (HAS_PAINT.test(value)) {\n\t\t\t\tcss = `${prop}: ${value}${rule.style.getPropertyPriority(prop)};`;\n\t\t\t}\n\t\t}\n\t\tif (!css) return;\n\t\tcss = `${rule.selectorText}{${css}}`;\n\t\t// wrap the StyleRule in any parent ConditionalRules (media queries, etc):\n\t\tlet r = rule;\n\t\twhile ((r = r.parentRule)) {\n\t\t\tcss = `${r.cssText.match(/^[\\s\\S]+?\\{/)[0]}${css}}`;\n\t\t}\n\t\tnewSheet += css;\n\t});\n\n\tsheet.remove();\n\n\tif (newSheet) {\n\t\tconst pageStyles = document.createElement('style');\n\t\t// pageStyles.$$paintid = styleSheetCounter;\n\t\tpageStyles.appendChild(document.createTextNode(newSheet));\n\t\troot.appendChild(pageStyles);\n\t\tupdate();\n\t}\n}\n\nfunction escapePaintRules(css) {\n\treturn css.replace(/( |;|,|\\b)paint\\s*\\(\\s*(['\"]?)(.+?)\\2\\s*\\)( |;|,|!|\\b|$)/g, '$1url(data:image/paint-$3,=)$4');\n}\n\nlet updateQueue = [];\nfunction queueUpdate(element, forceInvalidate) {\n\tif (forceInvalidate) {\n\t\telement.$$paintObservedProperties = null;\n\t\tif (element.$$paintGeometry && !element.$$paintGeometry.live) {\n\t\t\telement.$$paintGeometry = null;\n\t\t}\n\t}\n\tif (element.$$paintPending===true) return;\n\telement.$$paintPending = true;\n\tif (updateQueue.indexOf(element) === -1 && updateQueue.push(element) === 1) {\n\t\tdefer(processUpdateQueue);\n\t}\n}\nfunction processUpdateQueue() {\n\t// any added stylesheets get processed first before flushing queued elements\n\tlet shouldUpdate;\n\tfor (let i=0; i<updateQueue.length; i++) {\n\t\tif (updateQueue[i] && updateQueue[i].localName === 'style') {\n\t\t\tshouldUpdate = true;\n\t\t\tupdateQueue[i] = null;\n\t\t}\n\t}\n\tif (shouldUpdate) {\n\t\tdefer(processUpdateQueue);\n\t\tupdate();\n\t\treturn;\n\t}\n\t// if we need to disable the override sheet, only do it once:\n\tconst disable = updateQueue.length && updateQueue.some(el => el && el.$$needsOverrides === true);\n\tif (disable) disableOverrides();\n\twhile (updateQueue.length) {\n\t\tlet el = updateQueue.pop();\n\t\tif (el) maybeUpdateElement(el);\n\t}\n\tif (disable) enableOverrides();\n}\n\nfunction processItem(selector, forceInvalidate) {\n\ttry {\n\t\tlet sel = document.querySelectorAll(selector);\n\t\tfor (let i=0; i<sel.length; i++) queueUpdate(sel[i], forceInvalidate);\n\t}\n\tcatch (e) {}\n}\n\nfunction loadImages(images, callback, args) {\n\tlet count = images.length;\n\tlet onload = () => {\n\t\tif (--count) return;\n\t\tcallback.apply(null, args || EMPTY_ARRAY);\n\t};\n\tfor (let i=0; i<images.length; i++) {\n\t\tlet img = new Image();\n\t\timg.onload = onload;\n\t\timg.onerror = onerror;\n\t\timg.src = images[i];\n\t}\n}\n\nfunction ensurePaintId(element) {\n\tlet paintId = element.$$paintId;\n\tif (paintId==null) {\n\t\tpaintId = element.$$paintId = ++idCounter;\n\t}\n\treturn paintId;\n}\n\nfunction getPaintRuleForElement(element) {\n\tlet paintRule = element.$$paintRule,\n\t\tpaintId = ensurePaintId(element);\n\t// Fix cloned DOM trees which can have incorrect data-css-paint attributes:\n\tif (Number(element.getAttribute('data-css-paint')) !== paintId) {\n\t\telement.setAttribute('data-css-paint', paintId);\n\t}\n\tif (paintRule==null) {\n\t\tlet index = overrideStyles.insertRule(`[data-css-paint=\"${paintId}\"] {}`, overrideStyles.cssRules.length);\n\t\tpaintRule = element.$$paintRule = overrideStyles.cssRules[index];\n\t}\n\treturn paintRule;\n}\n\nfunction getCssText(style) {\n\tlet text = style.cssText;\n\tif (text) return text;\n\ttext = '';\n\tfor (let i=0, prop; i<style.length; i++) {\n\t\tprop = style[i];\n\t\tif (i!==0) text += ' ';\n\t\ttext += prop;\n\t\ttext += ':';\n\t\ttext += style.getPropertyValue(prop);\n\t\ttext += ';';\n\t}\n\treturn text;\n}\n\nfunction maybeUpdateElement(element) {\n\tlet computed = getComputedStyle(element);\n\n\tif (element.$$paintObservedProperties && !element.$$needsOverrides) {\n\t\tfor (let i=0; i<element.$$paintObservedProperties.length; i++) {\n\t\t\tlet prop = element.$$paintObservedProperties[i];\n\t\t\tif (computed.getPropertyValue(prop).trim() !== element.$$paintedPropertyValues[prop]) {\n\t\t\t\tupdateElement(element, computed);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\telse if (element.$$paintId || HAS_PAINT.test(getCssText(computed))) {\n\t\tupdateElement(element, computed);\n\t}\n\telse {\n\t\t// first time we've seen this element, and it has a style attribute with unparsed paint rules.\n\t\tconst styleAttr = element.getAttribute('style');\n\t\tif (HAS_PAINT.test(styleAttr)) {\n\t\t\telement.style.cssText = styleAttr.replace(/;\\s*$/, '') + '; ' + element.style.cssText;\n\t\t\tupdateElement(element);\n\t\t}\n\t}\n\n\telement.$$paintPending = false;\n}\n\n// Invalidate any cached geometry and enqueue an update\nfunction invalidateElementGeometry(element) {\n\tif (element.$$paintGeometry && !element.$$paintGeometry.live) {\n\t\telement.$$paintGeometry = null;\n\t}\n\tqueueUpdate(element);\n}\n\nlet currentProperties, currentElement, propertyContainerCache;\nconst propertiesContainer = {\n\t// .get() is used by worklets\n\tget(name) {\n\t\tconst def = CSS_PROPERTIES[name];\n\t\tlet v = def && def.inherits === false ? currentElement.style.getPropertyValue(name) : propertiesContainer.getRaw(name);\n\t\tif (v == null && def) v = def.initialValue;\n\t\telse if (def && def.syntax) {\n\t\t\tconst s = def.syntax.replace(/[<>\\s]/g, '');\n\t\t\tif (typeof CSS[s] === 'function') v = CSS[s](v);\n\t\t}\n\t\t// Safari returns whitespace around values:\n\t\tif (typeof v === 'string') v = v.trim();\n\t\treturn v;\n\t},\n\tgetRaw(name) {\n\t\tif (name in propertyContainerCache) return propertyContainerCache[name];\n\t\tlet v = currentProperties.getPropertyValue(name);\n\t\t// Safari returns whitespace around values:\n\t\tif (typeof v === 'string') v = v.trim();\n\t\treturn propertyContainerCache[name] = v;\n\t}\n};\n\n// Get element geometry, relying on cached values if possible.\nfunction getElementGeometry(element) {\n\treturn element.$$paintGeometry || (element.$$paintGeometry = {\n\t\twidth: element.clientWidth,\n\t\theight: element.clientHeight,\n\t\tlive: false\n\t});\n}\n\nconst resizeObserver = window.ResizeObserver && new window.ResizeObserver((entries) => {\n\tfor (let i=0; i<entries.length; i++) {\n\t\tconst entry = entries[i];\n\t\tlet geom = entry.target.$$paintGeometry;\n\t\tif (geom) geom.live = true;\n\t\telse geom = entry.target.$$paintGeometry = { width: 0, height: 0, live: true };\n\t\tlet bbox = entry.borderBoxSize;\n\t\t// Firefox returns a single borderBoxSize object, Chrome returns an Array of them:\n\t\tif (bbox && bbox.length) bbox = bbox[0];\n\t\tif (bbox) {\n\t\t\tgeom.width = bbox.inlineSize | 0;\n\t\t\tgeom.height = bbox.blockSize | 0;\n\t\t}\n\t\telse {\n\t\t\t// contentRect is the content box, so we add padding to get border-box:\n\t\t\tconst computed = getComputedStyle(entry.target);\n\t\t\tconst paddingX = parseFloat(computed.paddingLeft) + parseFloat(computed.paddingRight);\n\t\t\tconst paddingY = parseFloat(computed.paddingTop) + parseFloat(computed.paddingBottom);\n\t\t\tgeom.width = Math.round(((entry.contentRect.right - entry.contentRect.left) || entry.contentRect.width) + paddingX);\n\t\t\tgeom.height = Math.round(((entry.contentRect.bottom - entry.contentRect.top) || entry.contentRect.height) + paddingY);\n\t\t}\n\t\tqueueUpdate(entry.target, true);\n\t}\n});\nfunction observeResize(element) {\n\tif (resizeObserver && !element.$$paintGeometry.live) {\n\t\telement.$$paintGeometry.live = true;\n\t\tresizeObserver.observe(element);\n\t}\n}\n\nlet idCounter = 0;\nfunction updateElement(element, computedStyle) {\n\tif (element.$$needsOverrides === true) disableOverrides();\n\tlet style = currentProperties = computedStyle==null ? getComputedStyle(element) : computedStyle;\n\tcurrentElement = element;\n\t// element.$$paintGeom = style;\n\tpropertyContainerCache = {};\n\tlet paintRule;\n\tlet observedProperties = [];\n\n\telement.$$paintPending = false;\n\n\t// @TODO get computed styles and precompute geometry in a rAF after first paint, then re-use w/ invalidation\n\tlet elementGeometry = getElementGeometry(element);\n\tobserveResize(element);\n\telementGeometry = { width: elementGeometry.width, height: elementGeometry.height };\n\n\tlet dpr = getDevicePixelRatio();\n\n\tlet paintedProperties = element.$$paintedProperties;\n\n\tfor (let i=0; i<style.length; i++) {\n\t\tlet property = style[i],\n\t\t\tvalue = propertiesContainer.getRaw(property),\n\t\t\t// I am sorry\n\t\t\treg = /(,|\\b|^)(?:url\\((['\"]?))?((?:-moz-element\\(#|-webkit-canvas\\()paint-\\d+-([^;,]+)|(?:data:image\\/paint-|blob:[^'\"#]+#paint=)([^\"';, ]+)(?:[;,].*?)?)\\2\\)(;|,|\\s|\\b|$)/g,\n\t\t\tnewValue = '',\n\t\t\tindex = 0,\n\t\t\turls = [],\n\t\t\thasChanged = false,\n\t\t\thasPaints = false,\n\t\t\tpaintId,\n\t\t\ttoken,\n\t\t\tdisableScaling = false,\n\t\t\tgeom = elementGeometry;\n\t\t\n\t\tif (!IMAGE_CSS_PROPERTIES.test(property)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Ignore unnecessarily aliased vendor-prefixed properties:\n\t\tif (property === '-webkit-border-image') continue;\n\n\t\t// Support CSS Border Images\n\t\t// NOTE: Safari cannot handle DPI-scaled border-image:-webkit-canvas(), so we disable HiDPI.\n\t\tif (/border-image/.test(property)) {\n\t\t\tlet w = geom.width;\n\t\t\tlet h = geom.height;\n\n\t\t\tconst slice = parseCssDimensions(\n\t\t\t\tpropertiesContainer\n\t\t\t\t\t.getRaw('border-image-slice')\n\t\t\t\t\t.replace(/\\sfill/, '')\n\t\t\t\t\t.split(' ')\n\t\t\t);\n\t\t\tconst borderWidth = parseCssDimensions(propertiesContainer.getRaw('border-width').split(' '));\n\t\t\tconst outset = parseCssDimensions(propertiesContainer.getRaw('border-image-outset').split(' '));\n\n\t\t\t// Add the outside to dimensions, which is a multiple/percentage of each border width:\n\t\t\t// Note: this must first omit any sides that have been sliced to 0px.\n\t\t\tw += applyDimensions(slice.left != '0' && parseFloat(borderWidth.left) || 0, outset.left || 0, true);\n\t\t\tw += applyDimensions(slice.right != '0' && parseFloat(borderWidth.right) || 0, outset.right || 0, true);\n\t\t\th += applyDimensions(slice.top != '0' && parseFloat(borderWidth.top) || 0, outset.top || 0, true);\n\t\t\th += applyDimensions(slice.bottom != '0' && parseFloat(borderWidth.bottom) || 0, outset.bottom || 0, true);\n\n\t\t\tdisableScaling = true;\n\n\t\t\tgeom = { width: w, height: h };\n\t\t}\n\n\t\twhile ((token = reg.exec(value))) {\n\t\t\tif (hasPaints === false) {\n\t\t\t\tpaintId = ensurePaintId(element);\n\t\t\t}\n\n\t\t\thasPaints = true;\n\t\t\tnewValue += value.substring(0, token.index);\n\t\t\tlet painterName = token[4] || token[5];\n\t\t\tlet currentUri = token[3];\n\t\t\tlet painter = getPainter(painterName);\n\t\t\tlet contextOptions = painter && painter.Painter.contextOptions || {};\n\t\t\tlet equivalentDpr = disableScaling || contextOptions.scaling === false ? 1 : dpr;\n\n\t\t\tlet inst;\n\t\t\tif (painter) {\n\t\t\t\tif (painter.Painter.inputProperties) {\n\t\t\t\t\tobservedProperties.push.apply(observedProperties, painter.Painter.inputProperties);\n\t\t\t\t}\n\t\t\t\tinst = getPainterInstance(painter);\n\t\t\t}\n\n\t\t\tif (contextOptions.nativePixels===true) {\n\t\t\t\tgeom.width *= dpr;\n\t\t\t\tgeom.height *= dpr;\n\t\t\t\tequivalentDpr = 1;\n\t\t\t}\n\n\t\t\tlet actualWidth = equivalentDpr * geom.width,\n\t\t\t\tactualHeight = equivalentDpr * geom.height;\n\n\t\t\tlet ctx = element.$$paintContext;\n\t\t\tlet cssContextId = `paint-${paintId}-${painterName}`;\n\t\t\tlet canvas = ctx && ctx.canvas;\n\n\t\t\t// Changing the -webkit-canvas() id requires getting a new context.\n\t\t\tconst requiresNewBackingContext = USE_CSS_CANVAS_CONTEXT===true && ctx && cssContextId !== ctx.id;\n\n\t\t\tif (!canvas || canvas.width!=actualWidth || canvas.height!=actualHeight || requiresNewBackingContext) {\n\t\t\t\tif (USE_CSS_CANVAS_CONTEXT===true) {\n\t\t\t\t\tctx = document.getCSSCanvasContext('2d', cssContextId, actualWidth, actualHeight);\n\t\t\t\t\tctx.id = cssContextId;\n\t\t\t\t\t// Note: even when we replace ctx here, we don't update `canvas`.\n\t\t\t\t\t// This is to enable the id !== check that sets hasChanged=true later.\n\t\t\t\t\tif (element.$$paintContext) {\n\t\t\t\t\t\t// clear any re-used context\n\t\t\t\t\t\tctx.clearRect(0, 0, actualWidth, actualHeight);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlet shouldAppend = false;\n\t\t\t\t\tif (!canvas) {\n\t\t\t\t\t\tcanvas = document.createElement('canvas');\n\t\t\t\t\t\tcanvas.id = cssContextId;\n\t\t\t\t\t\tshouldAppend = USE_CSS_ELEMENT;\n\t\t\t\t\t}\n\t\t\t\t\tcanvas.width = actualWidth;\n\t\t\t\t\tcanvas.height = actualHeight;\n\t\t\t\t\tif (shouldAppend) {\n\t\t\t\t\t\tcanvas.style.display = 'none';\n\t\t\t\t\t\troot.appendChild(canvas);\n\t\t\t\t\t}\n\t\t\t\t\tctx = canvas.getContext('2d');\n\t\t\t\t}\n\t\t\t\telement.$$paintContext = ctx;\n\t\t\t\tctx.imageSmoothingEnabled = false;\n\t\t\t\tif (equivalentDpr!==1) ctx.scale(equivalentDpr, equivalentDpr);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tctx.clearRect(0, 0, actualWidth, actualHeight);\n\n\t\t\t\t// This hack is no longer needed thanks to the closePath() fix\n\t\t\t\t// if (USE_CSS_CANVAS_CONTEXT===false) {\n\t\t\t\t// \tctx = ctx.canvas.getContext('2d');\n\t\t\t\t// }\n\t\t\t}\n\n\t\t\tif (inst) {\n\t\t\t\tctx.save();\n\t\t\t\tctx.beginPath();\n\t\t\t\tinst.paint(ctx, geom, propertiesContainer);\n\t\t\t\t// Close any open path so clearRect() can dump everything\n\t\t\t\tctx.closePath();\n\t\t\t\t// ctx.stroke();  // useful to verify that the polyfill painted rather than native paint().\n\t\t\t\tctx.restore();\n\t\t\t\t// -webkit-canvas() is scaled based on DPI by default, we don't want to reset that.\n\t\t\t\tif (USE_CSS_CANVAS_CONTEXT===false && !USE_CSS_ELEMENT && 'resetTransform' in ctx) {\n\t\t\t\t\tctx.resetTransform();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnewValue += token[1];\n\n\t\t\tif (USE_CSS_CANVAS_CONTEXT===true) {\n\t\t\t\tnewValue += `-webkit-canvas(${cssContextId})`;\n\t\t\t\t// new or replaced context (note: `canvas` is any PRIOR canvas)\n\t\t\t\tif (token[4] == null || canvas && canvas.id !== cssContextId) {\n\t\t\t\t\thasChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (USE_CSS_ELEMENT===true) {\n\t\t\t\tnewValue += `-moz-element(#${cssContextId})`;\n\t\t\t\tif (token[4] == null) hasChanged = true;\n\t\t\t\t// `canvas` here is the current canvas.\n\t\t\t\tif (canvas && canvas.id !== cssContextId) {\n\t\t\t\t\tcanvas.id = cssContextId;\n\t\t\t\t\thasChanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet uri = canvas.toDataURL('image/png').replace('/png', '/paint-' + painterName);\n\t\t\t\tif (typeof MSBlobBuilder==='function') {\n\t\t\t\t\turi = dataUrlToBlob(uri, painterName);\n\t\t\t\t}\n\t\t\t\t// let uri = ctx.canvas.toDataURL('image/bmp', 1).replace('/bmp', '/paint-' + painterName);\n\t\t\t\turls.push(uri);\n\t\t\t\tnewValue += 'url(\"' + uri + '\")';\n\t\t\t\tif (uri!==currentUri || !paintRule) {\n\t\t\t\t\tlet j = currentUri ? currentUri.indexOf('#') : -1;\n\t\t\t\t\tif (~j) URL.revokeObjectURL(currentUri.substring(0, j));\n\t\t\t\t\thasChanged = true;\n\t\t\t\t}\n\t\t\t\tcurrentUri = uri;\n\t\t\t}\n\n\t\t\tnewValue += token[6];\n\t\t\tindex = token.index + token[0].length;\n\t\t}\n\n\t\tif (hasPaints===false && paintedProperties!=null && paintedProperties[property]!=null) {\n\t\t\tif (!paintRule) paintRule = getPaintRuleForElement(element);\n\t\t\tpaintRule.style.removeProperty(property);\n\t\t\tif (resizeObserver) resizeObserver.unobserve(element);\n\t\t\tif (element.$$paintGeometry) element.$$paintGeometry.live = false;\n\t\t\tcontinue;\n\t\t}\n\n\t\tnewValue += value.substring(index);\n\t\tif (hasChanged) {\n\t\t\tif (!paintRule) paintRule = getPaintRuleForElement(element);\n\n\t\t\tif (paintedProperties==null) {\n\t\t\t\tpaintedProperties = element.$$paintedProperties = {};\n\t\t\t}\n\t\t\tpaintedProperties[property] = true;\n\n\t\t\tif (property.substring(0, 10) === 'background' && dpr !== 1) {\n\t\t\t\t// `${geom.width}px ${geom.height}px` `contain`\n\t\t\t\tapplyStyleRule(paintRule.style, 'background-size', `100% 100%`);\n\t\t\t}\n\n\t\t\tif (/mask/.test(property) && dpr !== 1) {\n\t\t\t\tapplyStyleRule(paintRule.style, 'mask-size', 'contain');\n\t\t\t\t// cheat: \"if this is Safari\"\n\t\t\t\tif (USE_CSS_CANVAS_CONTEXT) {\n\t\t\t\t\tapplyStyleRule(paintRule.style, '-webkit-mask-size', 'contain');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// `border-color:transparent` in Safari overrides border-image\n\t\t\tif (/border-image/.test(property) && USE_CSS_CANVAS_CONTEXT) {\n\t\t\t\tapplyStyleRule(paintRule.style, 'border-color', 'initial');\n\t\t\t\tapplyStyleRule(paintRule.style, 'image-rendering', 'optimizeSpeed'); // -webkit-crisp-edges\n\t\t\t}\n\n\t\t\tif (urls.length===0) {\n\t\t\t\tapplyStyleRule(paintRule.style, property, newValue);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tloadImages(urls, applyStyleRule, [paintRule.style, property, newValue]);\n\t\t\t}\n\t\t}\n\t}\n\n\telement.$$paintObservedProperties = observedProperties.length===0 ? null : observedProperties;\n\tlet propertyValues = element.$$paintedPropertyValues = {};\n\tfor (let i=0; i<observedProperties.length; i++) {\n\t\tlet prop = observedProperties[i];\n\t\t// use propertyContainer here to select cached values\n\t\tpropertyValues[prop] = propertiesContainer.getRaw(prop);\n\t}\n\n\tif (element.$$needsOverrides === true) enableOverrides();\n\telement.$$needsOverrides = null;\n}\n\nlet overrideLocks = 0;\nfunction disableOverrides() {\n\tif (!overrideLocks++) overridesStylesheet.disabled = true;\n}\nfunction enableOverrides() {\n\tif (!--overrideLocks) overridesStylesheet.disabled = false;\n}\n\nfunction dataUrlToBlob(dataUrl, name) {\n\tlet bin = atob(dataUrl.split(',')[1]),\n\t\tarr = new Uint8Array(bin.length);\n\tfor (let i=0; i<bin.length; i++) arr[i] = bin.charCodeAt(i);\n\treturn URL.createObjectURL(new Blob([arr])) + '#paint=' + name;\n}\n\nfunction applyStyleRule(style, property, value) {\n\tlet o = bypassStyleHooks;\n\tbypassStyleHooks = true;\n\tstyle.setProperty(property, value, 'important');\n\tbypassStyleHooks = o;\n}\n\n// apply a dimension offset to a base unit value (used for computing border-image sizes)\nfunction applyDimensions(base, dim, omitBase) {\n\tconst r = omitBase ? 0 : base;\n\tlet v = parseFloat(dim);\n\tif (!dim) return r;\n\tif (dim.match('px')) return r + v;\n\tif (dim.match('%')) v /= 100;\n\treturn base * v;\n}\n\n// Compute dimensions from a CSS unit group\nfunction parseCssDimensions(arr) {\n\treturn {\n\t\ttop: arr[0],\n\t\tbottom: arr[2] || arr[0],\n\t\tleft: arr[3] || arr[1] || arr[0],\n\t\tright: arr[1] || arr[0]\n\t};\n}\n\nfunction PaintWorklet() {}\nPaintWorklet.prototype.addModule = function(url) {\n\tlet p, resolve;\n\tif (HAS_PROMISE) {\n\t\tp = new Promise((r) => resolve = r);\n\t}\n\n\tfetchText(url, code => {\n\t\tlet context = {\n\t\t\tregisterPaint(name, Painter) {\n\t\t\t\tregisterPaint(name, Painter, {\n\t\t\t\t\tcontext,\n\t\t\t\t\trealm\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\tdefineProperty(context, 'devicePixelRatio', {\n\t\t\tget: getDevicePixelRatio\n\t\t});\n\t\tcontext.self = context;\n\t\tlet parent = styleIsolationFrame.contentDocument && styleIsolationFrame.contentDocument.body || root;\n\t\tlet realm = new Realm(context, parent);\n\n\t\tcode = (this.transpile || String)(code);\n\n\t\trealm.exec(code);\n\t\tif (resolve) resolve();\n\t});\n\n\treturn p;\n};\n\nfunction init() {\n\tlet lock = false;\n\tnew MutationObserver(records => {\n\t\tif (lock===true || overrideLocks) return;\n\t\tlock = true;\n\t\tfor (let i = 0; i < records.length; i++) {\n\t\t\tlet record = records[i], target = record.target, added, removed;\n\t\t\t// Ignore all inline SVG mutations:\n\t\t\tif (target && 'ownerSVGElement' in target) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (record.type === 'childList') {\n\t\t\t\tif ((added = record.addedNodes)) {\n\t\t\t\t\tfor (let j = 0; j < added.length; j++) {\n\t\t\t\t\t\tif (added[j].nodeType === 1) {\n\t\t\t\t\t\t\t// Newly inserted elements can contain entire subtrees\n\t\t\t\t\t\t\t// if constructed before the root is attached. Only the root\n\t\t\t\t\t\t\t// emits a mutation, so we have to visit all children:\n\t\t\t\t\t\t\twalk(added[j], queueUpdate);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ((removed = record.removedNodes)) {\n\t\t\t\t\tfor (let j = 0; j < removed.length; j++) {\n\t\t\t\t\t\tif (resizeObserver && removed[j].$$paintGeometry) {\n\t\t\t\t\t\t\tremoved[j].$$paintGeometry.live = false;\n\t\t\t\t\t\t\tif (resizeObserver) resizeObserver.unobserve(removed[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (record.type==='attributes' && target.nodeType === 1) {\n\t\t\t\t// prevent removal of data-css-paint attribute\n\t\t\t\tif (record.attributeName === 'data-css-paint' && record.oldValue && target.$$paintId != null && !target.getAttribute('data-css-paint')) {\n\t\t\t\t\tensurePaintId(target);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\twalk(target, invalidateElementGeometry);\n\t\t\t}\n\t\t}\n\t\tlock = false;\n\t}).observe(document.body, {\n\t\tchildList: true,\n\t\tattributes: true,\n\t\tattributeOldValue: true,\n\t\tsubtree: true\n\t});\n\n\tconst setAttributeDesc = Object.getOwnPropertyDescriptor(Element.prototype, 'setAttribute');\n\tconst oldSetAttribute = setAttributeDesc.value;\n\tsetAttributeDesc.value = function(name, value) {\n\t\tif (name === 'style' && HAS_PAINT.test(value)) {\n\t\t\tvalue = escapePaintRules(value);\n\t\t\tensurePaintId(this);\n\t\t\tthis.$$needsOverrides = true;\n\t\t\tinvalidateElementGeometry(this);\n\t\t}\n\t\treturn oldSetAttribute.call(this, name, value);\n\t};\n\tdefineProperty(Element.prototype, 'setAttribute', setAttributeDesc);\n\n\t// avoid frameworks removing the data-css-paint attribute:\n\tconst removeAttributeDesc = Object.getOwnPropertyDescriptor(Element.prototype, 'removeAttribute');\n\tconst oldRemoveAttribute = removeAttributeDesc.value;\n\tremoveAttributeDesc.value = function(name) {\n\t\tif (name === 'data-css-paint') return;\n\t\treturn oldRemoveAttribute.call(this, name);\n\t};\n\tdefineProperty(Element.prototype, 'removeAttribute', removeAttributeDesc);\n\n\tlet styleDesc = Object.getOwnPropertyDescriptor(HTMLElement.prototype, 'style');\n\tconst oldStyleGetter = styleDesc.get;\n\tstyleDesc.set = function(value) {\n\t\tconst style = styleDesc.get.call(this);\n\t\treturn style.cssText = value;\n\t};\n\tstyleDesc.get = function() {\n\t\tconst style = oldStyleGetter.call(this);\n\t\tif (style.ownerElement !== this) {\n\t\t\tdefineProperty(style, 'ownerElement', { value: this });\n\t\t}\n\t\treturn style;\n\t};\n\tdefineProperty(HTMLElement.prototype, 'style', styleDesc);\n\n\t/** @type {PropertyDescriptorMap} */\n\tconst propDescs = {};\n\n\tlet cssTextDesc = Object.getOwnPropertyDescriptor(CSSStyleDeclaration.prototype, 'cssText');\n\tlet oldSet = cssTextDesc.set;\n\tcssTextDesc.set = function (value) {\n\t\tif (!overrideLocks && HAS_PAINT.test(value)) {\n\t\t\tvalue = value && escapePaintRules(value);\n\t\t\tconst owner = this.ownerElement;\n\t\t\tif (owner) {\n\t\t\t\tensurePaintId(owner);\n\t\t\t\towner.$$needsOverrides = true;\n\t\t\t\tinvalidateElementGeometry(owner);\n\t\t\t}\n\t\t}\n\t\treturn oldSet.call(this, value);\n\t};\n\tpropDescs.cssText = cssTextDesc;\n\n\tconst properties = Object.keys((window.CSS2Properties || CSSStyleDeclaration).prototype).filter(m => IMAGE_CSS_PROPERTIES.test(m));\n\tproperties.forEach((prop) => {\n\t\tconst n = prop.replace(/([A-Z])/g, '-$1').toLowerCase();\n\t\tpropDescs[prop] = {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tget() {\n\t\t\t\tlet pri = this.getPropertyPriority(n);\n\t\t\t\treturn this.getPropertyValue(n) + (pri ? ' !'+pri : '');\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tconst v = String(value).match(/^(.*?)\\s*(?:!\\s*(important)\\s*)?$/);\n\t\t\t\tthis.setProperty(n, v[1], v[2]);\n\t\t\t\treturn this[prop];\n\t\t\t}\n\t\t};\n\t});\n\n\tlet setPropertyDesc = Object.getOwnPropertyDescriptor(CSSStyleDeclaration.prototype, 'setProperty');\n\tlet oldSetProperty = setPropertyDesc.value;\n\tsetPropertyDesc.value = function (name, value, priority) {\n\t\tif (!bypassStyleHooks && !overrideLocks && HAS_PAINT.test(value)) {\n\t\t\tvalue = value && escapePaintRules(value);\n\t\t\tconst owner = this.ownerElement;\n\t\t\tif (owner) {\n\t\t\t\tensurePaintId(owner);\n\t\t\t\towner.$$needsOverrides = true;\n\t\t\t\tinvalidateElementGeometry(owner);\n\t\t\t}\n\t\t}\n\t\toldSetProperty.call(this, name, value, priority);\n\t};\n\tpropDescs.setProperty = setPropertyDesc;\n\n\tObject.defineProperties(CSSStyleDeclaration.prototype, propDescs);\n\tif (window.CSS2Properties) {\n\t\tObject.defineProperties(window.CSS2Properties.prototype, propDescs);\n\t}\n\n\taddEventListener('resize', () => {\n\t\tprocessItem('[data-css-paint]');\n\t});\n\n\tconst OPTS = { passive: true };\n\n\t[\n\t\t'animationiteration',\n\t\t'animationend',\n\t\t'animationstart',\n\t\t'transitionstart',\n\t\t'transitionend',\n\t\t'transitionrun',\n\t\t'transitioncancel',\n\t\t'mouseover',\n\t\t'mouseout',\n\t\t'mousedown',\n\t\t'mouseup',\n\t\t'focus',\n\t\t'blur'\n\t].forEach(event => {\n\t\taddEventListener(event, updateFromEvent, OPTS);\n\t});\n\n\tfunction updateFromEvent(e) {\n\t\tlet t = e.target;\n\t\twhile (t) {\n\t\t\tif (t.nodeType === 1) queueUpdate(t);\n\t\t\tt = t.parentNode;\n\t\t}\n\t}\n\n\tupdate();\n\tprocessItem('[style*=\"paint\"]');\n}\n\nif (!supportsPaintWorklet) {\n\ttry {\n\t\tinit();\n\t}\n\tcatch (e) {\n\t}\n}\n","/**\n * Copyright 2018 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function Realm(scope, parentElement) {\n\tlet frame = document.createElement('iframe');\n\tframe.style.cssText = 'position:absolute; left:0; top:-999px; width:1px; height:1px;';\n\tparentElement.appendChild(frame);\n\tlet win = frame.contentWindow,\n\t\tdoc = win.document,\n\t\tvars = 'var window,$hook';\n\tfor (let i in win) {\n\t\tif (!(i in scope) && i!=='eval') {\n\t\t\tvars += ',';\n\t\t\tvars += i;\n\t\t}\n\t}\n\tfor (let i in scope) {\n\t\tvars += ',';\n\t\tvars += i;\n\t\tvars += '=self.';\n\t\tvars += i;\n\t}\n\tlet script = doc.createElement('script');\n\tscript.appendChild(doc.createTextNode(\n\t\t`function $hook(self,console) {\"use strict\";\n\t\t${vars};return function() {return eval(arguments[0])}}`\n\t));\n\tdoc.body.appendChild(script);\n\tthis.exec = win.$hook(scope, console);\n\t// this.destroy = () => { parentElement.removeChild(frame); };\n}\n"],"names":["fetchText","url","callback","let","xhr","XMLHttpRequest","onreadystatechange","readyState","responseText","open","send","defineProperty","obj","name","def","Object","get","paintWorklet","CSS","window","supports","s","property","value","const","el","styleIsolationFrame","contentDocument","body","style","cssText","length","comparison","v","t","n","tokenizer","exec","escape","replace","CSS_PROPERTIES","CSSUnitValue","unit","num","parseFloat","this","isNaN","registerProperty","prototype","toString","valueOf","split","forEach","IMAGE_CSS_PROPERTIES","supportsPaintWorklet","PaintWorklet","enumerable","configurable","GLOBAL_ID","root","document","createElement","documentElement","appendChild","overridesStylesheet","id","$$isPaint","overrideStyles","sheet","testStyles","bypassStyleHooks","EMPTY_ARRAY","HAS_PAINT","USE_CSS_CANVAS_CONTEXT","USE_CSS_ELEMENT","backgroundImage","HAS_PROMISE","Promise","defer","requestAnimationFrame","setTimeout","getDevicePixelRatio","devicePixelRatio","painters","trackedRules","styleSheetCounter","getPainterInstance","painter","inst","bit","instances","Painter","paintRuleWalker","rule","context","css","hasPaint","test","isNew","escapePaintRules","newRule","parentStyleSheet","parent","parentRule","rules","cssRules","index","i","deleteRule","appendRule","insertRule","replaceRule","key","cached","selector","selectorText","getCssText","counters","sheetId","toProcess","push","toRemove","properties","walk","node","iterator","child","firstElementChild","nextElementSibling","update","invalidateAll","sheets","slice","call","styleSheets","ownerNode","e","$$paintid","processNewSheet","walkStyles","processItem","join","stack","current","j","pop","len","type","r","undefined","mq","media","mediaText","self","matchMedia","matches","href","processRemoteSheet","childNodes","nodeValue","escaped","createTextNode","remove","removeChild","parseCss","_","next","processRemoteSheetRules","clearTimeout","timer","onload","onerror","newSheet","prop","item","getPropertyValue","getPropertyPriority","match","pageStyles","currentProperties","currentElement","propertyContainerCache","updateQueue","queueUpdate","element","forceInvalidate","$$paintObservedProperties","$$paintGeometry","live","$$paintPending","indexOf","processUpdateQueue","shouldUpdate","localName","disable","some","$$needsOverrides","disableOverrides","maybeUpdateElement","enableOverrides","sel","querySelectorAll","loadImages","images","args","count","apply","img","Image","src","ensurePaintId","paintId","$$paintId","idCounter","getPaintRuleForElement","paintRule","$$paintRule","Number","getAttribute","setAttribute","text","computed","getComputedStyle","trim","$$paintedPropertyValues","updateElement","styleAttr","invalidateElementGeometry","propertiesContainer","inherits","getRaw","initialValue","syntax","resizeObserver","ResizeObserver","entries","entry","geom","target","width","height","bbox","borderBoxSize","inlineSize","blockSize","paddingX","paddingLeft","paddingRight","paddingY","paddingTop","paddingBottom","Math","round","contentRect","right","left","bottom","top","computedStyle","observedProperties","elementGeometry","clientWidth","clientHeight","getElementGeometry","observe","observeResize","dpr","paintedProperties","$$paintedProperties","reg","newValue","urls","hasChanged","hasPaints","token","disableScaling","w","h","parseCssDimensions","borderWidth","outset","applyDimensions","substring","painterName","currentUri","contextOptions","equivalentDpr","scaling","inputProperties","nativePixels","actualWidth","actualHeight","ctx","$$paintContext","cssContextId","canvas","getCSSCanvasContext","clearRect","shouldAppend","display","getContext","imageSmoothingEnabled","scale","save","beginPath","paint","closePath","restore","resetTransform","uri","toDataURL","MSBlobBuilder","dataUrlToBlob","URL","revokeObjectURL","applyStyleRule","removeProperty","unobserve","propertyValues","overrideLocks","disabled","dataUrl","bin","atob","arr","Uint8Array","charCodeAt","createObjectURL","Blob","o","setProperty","base","dim","omitBase","addModule","p","resolve","code","registerPaint","worklet","query","realm","scope","parentElement","frame","win","contentWindow","doc","vars","script","transpile","String","lock","MutationObserver","records","record","added","removed","addedNodes","nodeType","removedNodes","attributeName","oldValue","childList","attributes","attributeOldValue","subtree","setAttributeDesc","getOwnPropertyDescriptor","Element","oldSetAttribute","removeAttributeDesc","oldRemoveAttribute","styleDesc","HTMLElement","oldStyleGetter","set","ownerElement","propDescs","cssTextDesc","CSSStyleDeclaration","oldSet","owner","keys","CSS2Properties","filter","m","toLowerCase","pri","setPropertyDesc","oldSetProperty","priority","defineProperties","addEventListener","OPTS","passive","updateFromEvent","parentNode","event","init"],"mappings":"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"}