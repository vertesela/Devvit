syntax = "proto3";

package devvit.ui.events.v1alpha;

import "devvit/ui/effects/v1alpha/realtime_subscriptions.proto";
import "devvit/ui/effects/v1alpha/show_form.proto";
import "devvit/ui/effects/v1alpha/show_toast.proto";
import "google/protobuf/struct.proto";
import "google/protobuf/wrappers.proto";

option go_package = "github.snooguts.net/reddit/reddit-devplatform-monorepo/go-common/generated/protos/types/devvit/ui/events/v1alpha";
option java_package = "com.reddit.devvit.ui.events.v1alpha";

message UIEvent {
  oneof event {
    devvit.ui.effects.v1alpha.RealtimeSubscriptionEvent realtime_event = 2;
    devvit.ui.effects.v1alpha.FormSubmittedEvent form_submitted = 3;
    devvit.ui.effects.v1alpha.ToastActionEvent toast_action = 4;
    UserAction user_action = 6;
    AsyncRequest async_request = 7;
    AsyncResponse async_response = 8;
  }

  // The queue to which this event should be sent.  If not set, the default queue is used.
  google.protobuf.StringValue queue = 9;
}

message AsyncError {
  string message = 1;

  /**
   * Typically a stack trace
   */
  string details = 2;
}

message AsyncRequest {
  string request_id = 1;
  google.protobuf.Struct data = 2;
}

message AsyncResponse {
  string request_id = 1;
  google.protobuf.Struct data = 2;
  AsyncError error = 3;
}

message UserAction {
  string action_id = 1;
  google.protobuf.Struct data = 2;
}
