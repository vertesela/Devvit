syntax = "proto3";

package devvit.plugin.linker;

import "devvit/plugin/buildpack/buildpack_common.proto";
import "devvit/plugin/linker/resolver.proto";
import "devvit/runtime/bundle.proto";

option go_package = "github.snooguts.net/reddit/reddit-devplatform-monorepo/go-common/generated/protos/types/devvit/plugin/linker";

message LinkerResponse {
  devvit.runtime.LinkedBundle bundle = 1;
  repeated ResolutionError errors = 2;
}

// Linker makes a BundledApp out of a bundle.  Technically, it could probably
// make a BundledApp out of a VersionedBundle#uuid, but that would require some
// refactoring.
//
// A Linker implementation will typically coordinate with a Resolver to find all
// of the other bundles to include.
service Linker {
  rpc Link(devvit.plugin.buildpack.Bundle) returns (LinkerResponse);
}
