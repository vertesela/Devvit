import { CompileResponse } from '@devvit/protos';
export function prefixBuildResultLogs(buildResult, prefix) {
    buildResult.errors.forEach((err) => {
        err.text = `[${prefix}] ${err.text}`;
    });
    buildResult.warnings.forEach((warning) => {
        warning.text = `[${prefix}] ${warning.text}`;
    });
    return buildResult;
}
export function mergeCompileRes(...compileRes) {
    const mergedCompileRes = CompileResponse.fromPartial({});
    let bundle = null;
    for (const res of compileRes) {
        if (res.bundle != null) {
            if (bundle != null) {
                throw new Error('Cannot merge two compile responses both with a bundle');
            }
            else {
                bundle = res.bundle;
            }
        }
        mergedCompileRes.errors.push(...res.errors);
        mergedCompileRes.warnings.push(...res.warnings);
    }
    if (bundle != null) {
        mergedCompileRes.bundle = bundle;
    }
    return mergedCompileRes;
}
