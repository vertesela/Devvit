syntax = "proto3";

package devvit.plugin.v2events;

import "devvit/options/options.proto";

option go_package = "github.snooguts.net/reddit/reddit-devplatform-monorepo/go-common/generated/protos/types/devvit/plugin/v2events";
option java_outer_classname = "_V2Events";
option java_package = "com.reddit.devvit.plugin.v2events";

message V2EventsActionInfo {
  string page_type = 1;
  string pane_name = 2;
}

message V2EventsPostGuidanceCreate {
  option (devvit.options.source) = "moderator";
  option (devvit.options.action) = "save";
  option (devvit.options.noun) = "post_guidance";
  V2EventsActionInfo action_info = 1;
}

message V2EventsPostGuidanceUpdate {
  option (devvit.options.source) = "moderator";
  option (devvit.options.action) = "edit";
  option (devvit.options.noun) = "post_guidance";
  V2EventsActionInfo action_info = 1;
}

message V2EventsPublishRequest {
  oneof data {
    V2EventsPostGuidanceCreate post_guidance_create = 1;
    V2EventsPostGuidanceUpdate post_guidance_update = 2;
  }
}

// Generic response interface
message V2EventsPublishResponse {}

// The Events plugin allows an app to emit pre-defined v2 events
service V2Events {
  rpc Publish(V2EventsPublishRequest) returns (V2EventsPublishResponse);
}
