syntax = "proto3";

package devvit.ui.events.v1alpha;

import "devvit/ui/effects/v1alpha/effect.proto";
import "devvit/ui/effects/v1alpha/realtime_subscriptions.proto";
import "devvit/ui/effects/v1alpha/show_form.proto";
import "devvit/ui/effects/v1alpha/show_toast.proto";
import "google/protobuf/struct.proto";

option go_package = "github.snooguts.net/reddit/reddit-devplatform-monorepo/go-common/generated/protos/types/devvit/ui/events/v1alpha";
option java_package = "com.reddit.devvit.ui.events.v1alpha";

message UIEvent {
  oneof event {
    devvit.ui.effects.v1alpha.RealtimeSubscriptionEvent realtime_event = 2;
    devvit.ui.effects.v1alpha.FormSubmittedEvent form_submitted = 3;
    devvit.ui.effects.v1alpha.ToastActionEvent toast_action = 4;
  }
}

message HandleUIEventRequest {
  google.protobuf.Struct state = 1;

  UIEvent event = 2;
}

message HandleUIEventResponse {
  google.protobuf.Struct state = 1;

  repeated devvit.ui.effects.v1alpha.Effect effects = 2;
}

service UIEventHandler {
  rpc HandleUIEvent(HandleUIEventRequest) returns (HandleUIEventResponse);
}
