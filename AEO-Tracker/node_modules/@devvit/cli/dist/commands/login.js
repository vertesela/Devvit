import { DevvitCommand } from '../util/commands/DevvitCommand.js';
import { Flags } from '@oclif/core';
class Login extends DevvitCommand {
    async run() {
        const { flags: { 'copy-paste': copyPaste }, } = await this.parse(Login);
        // Clearing a local token before attempting to login (in case the token has expired, for example)
        await this.oauthSvc.Logout({});
        const token = await this.getAccessTokenAndLoginIfNeeded(copyPaste);
        const username = await this.getUserDisplayName(token);
        this.log(`Logged in as ${username}`);
    }
}
Login.description = 'Log in to Devvit via reddit.com';
Login.flags = {
    'copy-paste': Flags.boolean({
        required: false,
        default: false,
        description: 'If present, the user will copy-paste their code from the browser, rather than use localhost.',
    }),
};
export default Login;
